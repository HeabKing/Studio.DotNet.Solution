<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>写文章</title>
	<link href="/lib/fex-webuploader/dist/webuploader.css" rel="stylesheet" />
</head>
<body>
	<div>
		<div style="text-align:center">
			<p>
				标题: <input type="text" name="title" />
			</p>
			<p>
				标签: <input type="text" placeholder="使用空格进行分割" name="tag" />
			</p>
			<p>
				摘要: <textarea name="description"></textarea>
			</p>
			<div id="uploader" class="wu-example">
				<!--用来存放文件信息-->
				<div id="thelist" class="uploader-list"></div>
				<div class="btns">
					<div id="picker">选择文件</div>
				</div>
			</div>
			<p>
				<input type="button" value="提交" />
			</p>
		</div>
	</div>
	<script src="/lib/jquery/dist/jquery.js"></script>
	<script src="/lib/fex-webuploader/dist/webuploader.js"></script>
<script>
	function init() {
		var uploader = WebUploader.create({
			// 选完文件是否自动上传
			auto: true,
			// swf文件路径
			swf: "/lib/fex-webuploader/dist/Uploader.swf",
			// 文件接收服务端。
			server: "/api/article/contentUrl",
			// 选择文件的按钮。可选。
			// 内部根据当前运行是创建，可能是input元素，也可能是flash.
			pick: '#picker',
			// 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
			resize: false,
			// 文件类型筛选
			accept: {
				title: 'Word',
				extensions: 'doc,docx',
				mimeTypes: 'application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document'
			}
		});

		uploader.on('uploadAccept', function (object, ret) {
			if (ret.status === "ok") {
				window.location.href = ret.data;
			} else {
				alert("转换失败");
				window.location.reload();
			}
		});
	}

	$(init);
	
</script>
</body>
</html>